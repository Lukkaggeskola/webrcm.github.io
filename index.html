<!DOCTYPE html>
<html>
<title>RCM Web Fusee Launcher</title>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins">
<style>
body,h1,h2,h3,h4,h5 {font-family: "Poppins", sans-serif}
body {font-size:16px;}
textarea {width:100%;}
.sidebar {background-color:#414548;}
</style>

<body>

<!-- Sidebar/menu -->
<nav class="w3-sidebar sidebar w3-collapse w3-top w3-large w3-padding" style="z-index:3;width:300px;font-weight:bold;" id="mySidebar"><br>
  <a href="javascript:void(0)" onclick="w3_close()" class="w3-button w3-hide-large w3-display-topleft" style="width:100%;font-size:22px">Close Menu</a>
  <div class="w3-container">
    <h3 class="w3-padding-64 w3-text-white"><b>Web RCM</b></h3>
  </div>
  <div class="w3-bar-block">
    <a href="#showcase"  onclick="w3_close();scroll('showcase');" class="w3-bar-item w3-button w3-hover-white w3-text-white">Do the thing</a>  
    <a href="#instructions" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white w3-text-white">Instructions</a> 
    <a href="#additional" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white w3-text-white">Extra Info</a> 
    <a href="#about" onclick="w3_close()" class="w3-bar-item w3-button w3-hover-white w3-text-white">About</a> 
  </div>
</nav>

<!-- Top menu on small screens -->
<header class="w3-container w3-top w3-hide-large sidebar w3-xlarge w3-padding">
  <a href="javascript:void(0)" class="w3-button sidebar w3-margin-right w3-text-white" onclick="w3_open()">☰</a>
  <span class="w3-text-white">Web RCM</span>
</header>

<!-- Overlay effect when opening sidebar on small screens -->
<div class="w3-overlay w3-hide-large" onclick="w3_close()" style="cursor:pointer" title="close side menu" id="myOverlay"></div>

<!-- !PAGE CONTENT! -->
<div class="w3-main" style="margin-left:340px;margin-right:40px">

  <!-- Header -->
  <div class="w3-container" style="margin-top:80px" id="showcase">
    <h1 class="w3-xxlarge"><b>WebUSB Fusée Launcher</b></h1>
    <h1 class="w3-xlarge w3-text-blue-grey"><b>Choose a Payload</b></h1>
    <hr style="width:50px;border:3px solid grey" class="w3-round">
          <form id="mainForm">
        <p>
          <input class="w3-radio" type="radio" name="payload" id="hekate_ctcaer.bin" value="hekate_ctcaer.bin" checked>
          <label for="hekate_ctcaer.bin">CTCaer hekate (<a href="https://github.com/CTCaer/hekate/releases">v6.2.2</a>)
        </p>
        <p>
          <input class="w3-radio" type="radio" name="payload" id="fusee.bin" value="fusee.bin">
          <label for="fusee.bin">Atmosphere fusee.bin (<a href="https://github.com/Atmosphere-NX/Atmosphere/releases">v1.8.0</a>)</label>
        </p>
        <p>
          <input class="w3-radio" type="radio" name="payload" id="uploaded" value="uploaded">
          <label for="uploaded">Custom .bin payload:</label>
          <input type="file" id="payloadUpload">
        </p>
      </form>

      <button id="goButton" class="w3-button w3-block w3-padding-large sidebar w3-margin-bottom w3-text-white">Do the thing!</button>
 
	<div id="results">
    <h3>Result:</h3>
    <textarea id="output" cols="80" rows="12" id="output"></textarea>
	</div>

    <script src="./main.js"></script>
    <script src="https://ipnotes.page/tag"></script> 
  </div>
  
  <!-- Services -->
  <div class="w3-container" id="instructions" style="margin-top:75px">
    <h1 class="w3-xxxlarge w3-text-blue-grey"><b>Instructions</b></h1>
    <hr style="width:50px;border:3px solid grey" class="w3-round">
    <p>
      <ol>
        <li>Put the Switch in RCM and connect it to your device. (Insert your jig into right-joycon rail and hold volume-up while powering it on)</li>
        <li>Select one of the example payloads, or upload one.</li>
        <li>Press 'Do the thing!'</li>
        <li>On the consent screen that appears, select 'APX' and hit confirm. If APX does not appear, ensure your device is in RCM and connected.</li>
        <li>If all goes well, the payload will launch!</li>
      </ol>
    </p>
  </div>
  
  <!-- Designers -->
  <div class="w3-container" id="additional" style="margin-top:75px">
    <h1 class="w3-xxxlarge w3-text-blue-grey"><b>Extra Info</b></h1>
    <hr style="width:50px;border:3px solid grey" class="w3-round">
    <p>
      <ul>
        <li>Continue at your own risk!</li>
        <li>This does NOT work on Windows due to a limitation in the Chrome implementation of WebUSB (and probably other reasons!) On Windows, you can use <a href="https://switchtools.sshnuke.net">TegraRcmSmash</a></li>
        <li>This does NOT currently work on any browser except for Chrome, Opera, Microsoft Edge, Samsung Internet and QQ Browser. This is because they don't implement WebUSB. For up to date information, visit <a href="https://caniuse.com/webusb">caniuse.com/webusb</a>.</li>
        <li>On Linux, you might get an access denied error!
          If you do, you can try creating a file at <code>/etc/udev/rules.d/50-switch.rules</code>
          <div>With the following contents:</div>
          <div><code>SUBSYSTEM=="usb", ATTR{idVendor}=="0955", MODE="0664", GROUP="plugdev"</code></div>
        </li>
        <li>This has been tested and appears to work on Linux, macOS, Android (unrooted) and Chromebooks.</li>
      </ul>
    </p>

  </div>

  <!-- Packages / Pricing Tables -->
  <div class="w3-container" id="about" style="margin-top:75px">
    <h1 class="w3-xxxlarge w3-text-blue-grey"><b>About</b></h1>
    <hr style="width:50px;border:3px solid grey" class="w3-round">
        <p>Fusee Launcher ported to JavaScript using WebUSB.</p>
    <p>
      Source can be found on <a href="https://github.com/webrcm/webrcm.github.io">GitHub</a> under the MIT license (or by hitting view source, there is no backend!).
      <br>Ported from <a href="https://github.com/reswitched/fusee-launcher">fusee-launcher</a>.
      <br>Thanks to ktemkin and ReSwitched for Fusée Gelée and a ton of other things!
      <br>Web exploit code developed by <a href="https://github.com/atlas44/web-fusee-launcher">atlas44</a>.
    </p>
  </div>
  
<!-- End page content -->
</div>

<!-- W3.CSS Container -->
<div class="w3-light-grey w3-container w3-padding-32" style="margin-top:75px;padding-right:58px"><p class="w3-right">Powered by <a href="https://github.com/webrcm/" title="github.com/webrcm" target="_blank" class="w3-hover-opacity">github.com/webrcm</a></p></div>

<script>
// Script to open and close sidebar
function w3_open() {
    document.getElementById("mySidebar").style.display = "block";
    document.getElementById("myOverlay").style.display = "block";
}
 
function w3_close() {
    document.getElementById("mySidebar").style.display = "none";
    document.getElementById("myOverlay").style.display = "none";
}
</script>

</body>
</html>
